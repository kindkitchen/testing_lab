var p=Object.defineProperty;var f=Object.getOwnPropertyDescriptor;var l=Object.getOwnPropertyNames;var y=Object.prototype.hasOwnProperty;var h=(n,i)=>{for(var g in i)p(n,g,{get:i[g],enumerable:!0})},x=(n,i,g,m)=>{if(i&&typeof i=="object"||typeof i=="function")for(let o of l(i))!y.call(n,o)&&o!==g&&p(n,o,{get:()=>i[o],enumerable:!(m=f(i,o))||m.enumerable});return n};var c=n=>x(p({},"__esModule",{value:!0}),n);var b={};h(b,{make_fixture:()=>w});module.exports=c(b);var w={start_builder_chain:{for_data_type:(...n)=>({with_possible_tags:((...i)=>({data_can_be_transformed_into_such_views:g=>({build:m=>{let o=Date.now(),_=Object.entries(m).reduce((e,[t,{fixture:s,tags:a}])=>{let r=++o;e.id_fixture.set(r,s),e.name_tag_id.set(t,new Map(a.map(d=>[d,r]))),e.id_name.set(r,t),e.name_id.set(t,r);for(let d of a)(e.tag_name_id.get(d)||e.tag_name_id.set(d,new Map).get(d)).set(t,r);return e},{id_fixture:new Map,name_id:new Map,id_name:new Map,name_tag_id:new Map,tag_name_id:new Map}),T=e=>({add_to_more_tags:(...t)=>t.forEach(s=>{let a=_.name_id.get(e);(_.name_tag_id.get(e)||_.name_tag_id.set(e,new Map).get(e)).set(s,a),(_.tag_name_id.get(s)||_.tag_name_id.set(s,new Map).get(s)).set(e,a)}),remove_from_tags:(...t)=>t.forEach(s=>{_.name_tag_id.get(e).delete(s),_.tag_name_id.get(s).delete(e)}),update_data_source:t=>{let s=_.name_id.get(e),a=_.id_fixture.get(s),r=t(a);_.id_fixture.set(s,r)},as:Object.entries(g).reduce((t,[s,a])=>(t[s]=(...r)=>()=>{let d=_.name_id.get(e);return a(_.id_fixture.get(d),...r)},t),{})});return{one_by_name:T,many_with_tag:e=>({to_array_of_fixtures:()=>(_.tag_name_id.get(e)||[]).values().toArray().map(t=>T(_.id_name.get(t))),as:Object.entries(g).reduce((t,[s,a])=>(t[s]=()=>(...r)=>(_.tag_name_id.get(e)||[]).values().toArray().map(u=>a(_.id_fixture.get(u),...r)),t),{}),foreach_update_data_source:t=>{(_.tag_name_id.get(e)||new Map).entries().toArray().forEach(([s,a])=>{let r=_.id_fixture.get(a);_.id_fixture.set(a,t(r))})}})}}})}))})}};0&&(module.exports={make_fixture});
//# sourceMappingURL=make_fixture.js.map